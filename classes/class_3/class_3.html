
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Class 3: More OOP and Exception Handling &#8212; Python for Neuroscience</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.37f24b989f4638ff9c27c22dc7559d4f.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Class 4: The Scientific Stack (Part I - numpy)" href="../class_4/class_4.html" />
    <link rel="prev" title="Class 2: Virtual Environments and Object-oriented Programming (OOP)" href="../class_2/class_2.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Python for Neuroscience</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   Introduction
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../syllabus.html">
   Syllabus
  </a>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="../../contents.html">
   Contents
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../class_0/class_0.html">
     Class 0: Background and Basic Syntax
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../class_1/class_1.html">
     Class 1: More Syntax and The Python Stack
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../class_2/class_2.html">
     Class 2: Virtual Environments and Object-oriented Programming (OOP)
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Class 3: More OOP and Exception Handling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../class_4/class_4.html">
     Class 4: The Scientific Stack (Part I -
     <code class="docutils literal notranslate">
      <span class="pre">
       numpy
      </span>
     </code>
     )
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../class_5/class_5.html">
     Class 5: The Scientific Stack (Part II -
     <code class="docutils literal notranslate">
      <span class="pre">
       matplotlib
      </span>
     </code>
     and
     <code class="docutils literal notranslate">
      <span class="pre">
       pandas
      </span>
     </code>
     )
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../class_6/class_6.html">
     Class 6: Advanced
     <code class="docutils literal notranslate">
      <span class="pre">
       pandas
      </span>
     </code>
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../tutorials.html">
   Tutorials
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/python_setup.html">
     General Setup
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/create_git_repo.html">
     Create a Git Repository
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../resources.html">
   Resources
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/classes/class_3/class_3.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        
        <a class="issues-button"
            href="https://github.com/ZviBaratz/python_for_neuroscientists/issues/new?title=Issue%20on%20page%20%2Fclasses/class_3/class_3.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                    title="Fullscreen mode"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/ZviBaratz/python_for_neuroscientists/main?urlpath=tree/source/classes/class_3/class_3.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#object-oriented-programming-part-2">
   Object Oriented Programming: Part 2
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inheritance">
     Inheritance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inheritance-why-and-when">
     Inheritance - Why and When
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise">
   Exercise
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#smartphones">
     Smartphones
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-solution-below">
     Exercise solution below…
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#errors-and-exceptions">
   Errors and Exceptions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-user-input-verification">
   Exercise - User Input Verification
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#short-intro-pathlib">
     Short Intro -
     <code class="docutils literal notranslate">
      <span class="pre">
       pathlib
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-exercise">
       The exercise:
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Exercise solution below…
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="class-3-more-oop-and-exception-handling">
<h1>Class 3: More OOP and Exception Handling<a class="headerlink" href="#class-3-more-oop-and-exception-handling" title="Permalink to this headline">¶</a></h1>
<div class="section" id="object-oriented-programming-part-2">
<h2>Object Oriented Programming: Part 2<a class="headerlink" href="#object-oriented-programming-part-2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="inheritance">
<h3>Inheritance<a class="headerlink" href="#inheritance" title="Permalink to this headline">¶</a></h3>
<p>One of the most interesting aspects or features of object-oriented programming is <em>inheritance</em>. Inheritance is a specific type of relation between the objects we create that signifies that a “child” object <em>inherits</em> from its “parent”. In other words, the child object <strong>“is a”</strong> parent object. Our examples so far were of “real-life” objects, and so to continue this line we’d perhaps wish to create a class of a “Person”, which would be the parent class, and a child class of a “Student”. In this examples it’s clear why a “Student” <strong>is a</strong> Person, so the inheritance holds. All Persons have a name, age, gender, etc - but only students have an associated school and a final grade. This means that the Student will have all attributes associated with all Persons - name, age, gender - and they’ll also have a school and a grade. This is the meaning of “inheritance” in our lingo.</p>
<p>To solidify this point we’ll not use a contrived Person-Student example. Instead, we’ll use something a bit more typical to the work we do in our day to day life - a data reader. Say that we have some computational pipeline, that reads some data in, pre-processes it (denoising, filtering, changes its dimensions), then it computes some measurement of that dataset (number of cells in the image, mean calcium activity, min-max of electrical activity) and finally it writes it to disk. Let’s focus on the first step of this pipeline - reading in the data.</p>
<p><img alt="Computational pipeline" src="../../_images/pipeline_oop_inheritance.png" /></p>
<p>Our approach will be the following - we’ll build a parent class called <code class="docutils literal notranslate"><span class="pre">DataReader</span></code>, and its child classes will know how to read in specific data formats only. In the graph above we’ll have two child implementations: one that can read <code class="docutils literal notranslate"><span class="pre">.tif</span></code> images, and one for <code class="docutils literal notranslate"><span class="pre">.png</span></code>. This will allow us to “plug in” different classes into our pipeline, depending on the input, and the downstream functions won’t see a difference.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>


<span class="k">class</span> <span class="nc">DataReader</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Parent class of DataReader objects.</span>
<span class="sd">    </span>
<span class="sd">    This class provides an &quot;interface&quot; for child classes to implement,</span>
<span class="sd">    if they wish to be a part of the larger data processing pipeline of this project.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reads data into disk and returns it. Should populate self.data.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
    
    <span class="k">def</span> <span class="nf">summarize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</pre></div>
</div>
</div>
</div>
<p>This parent class could be initialized with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_reader</span> <span class="o">=</span> <span class="n">DataReader</span><span class="p">(</span><span class="s2">&quot;/some/path.tiff&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>and no harm will be done, but in practice there’s little one can achieve with this class. Any class that inherits from this base class has all methods the parent class has, even though theu currently simply raise an error (an exception) called <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;a.png&#39;</span>
<span class="n">data_reader</span> <span class="o">=</span> <span class="n">DataReader</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data_reader: </span><span class="si">{</span><span class="n">data_reader</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Using ends_with works</span>
<span class="n">extension</span> <span class="o">=</span> <span class="n">data_reader</span><span class="o">.</span><span class="n">ends_with</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current extension: </span><span class="si">{</span><span class="n">extension</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Using read doesn&#39;t</span>
<span class="n">data_reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>data_reader: &lt;__main__.DataReader object at 0x7f594c9d7df0&gt;
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="mi">9</span><span class="n">c623f8826a2</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> 
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="c1"># Using ends_with works</span>
<span class="ne">----&gt; </span><span class="mi">6</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">data_reader</span><span class="o">.</span><span class="n">ends_with</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current extension: </span><span class="si">{</span><span class="n">extension</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> 

<span class="ne">AttributeError</span>: &#39;DataReader&#39; object has no attribute &#39;ends_with&#39;
</pre></div>
</div>
</div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> tells the users of this class that they’ll have to implement this method when they derive the child class if they wish to have anything done with this interface. Let’s see how we write a child class:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tifffile</span>  <span class="c1"># Python&#39;s most popular tif processing library</span>


<span class="k">class</span> <span class="nc">TifDataReader</span><span class="p">(</span><span class="n">DataReader</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A DataReader designated to read .tif files. </span>
<span class="sd">    </span>
<span class="sd">    Uses the tifffile package to do the heavy lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="c1"># self.name = &#39;abc&#39;</span>
    
    <span class="k">def</span> <span class="nf">verify_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Verifies that the given filename is valid.&quot;&quot;&quot;</span>
        <span class="k">pass</span>
    
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reads a tif image to self.data and returns it as well.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verify_input</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">tifffile</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
    
    <span class="k">def</span> <span class="nf">summarize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;A simple mean of the data.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Inheritance happens when you write a different class’ name between the braces at the top line. This tells Python to transfer attributes and methods from the parent to this child. The instatiation (=magic) happens using the special syntax of <code class="docutils literal notranslate"><span class="pre">super().__init__(argumets)</span></code> - what it says is “create the super (i.e. parent) class and call its <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method with the given arguments.</p>
<p>Besides that the only things that might catch the eye is the new method <code class="docutils literal notranslate"><span class="pre">verify_input()</span></code>, which the parent class didn’t require. This function, which I left unimplemented, checks that the given filename exists and that it’s indeed a tif file. The parent class didn’t mandate it, but I, as the implementer of the child class, deemed it necessary.</p>
<p>Let’s see how to use this class. Don’t worry, everything should seem straight-forward from now on:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;a.tif&#39;</span>
<span class="n">tif_data_reader</span> <span class="o">=</span> <span class="n">TifDataReader</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tif_data_reader</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
<span class="n">tif_data_reader</span><span class="o">.</span><span class="n">ends_with</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>a.tif
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">5</span><span class="n">a9cdcd3ad5f</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">tif_data_reader</span> <span class="o">=</span> <span class="n">TifDataReader</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="nb">print</span><span class="p">(</span><span class="n">tif_data_reader</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">4</span> <span class="n">tif_data_reader</span><span class="o">.</span><span class="n">ends_with</span><span class="p">()</span>

<span class="ne">AttributeError</span>: &#39;TifDataReader&#39; object has no attribute &#39;ends_with&#39;
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">tif_data_reader</span></code> has the <code class="docutils literal notranslate"><span class="pre">.read()</span></code> and <code class="docutils literal notranslate"><span class="pre">.summarize()</span></code> method ready to use. We won’t read an actual <code class="docutils literal notranslate"><span class="pre">.tif</span></code> file but you can see that nothing is really special about this class and instance. Inheritance in this case helped us give a tag to this class, signaling to its users that it’s “special” and should be used in some specific contexts.</p>
<p>For completeness, let’s write the other child class of <code class="docutils literal notranslate"><span class="pre">DataReader</span></code>. A single parent can obviously have as many childs as you wish.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">imageio</span>


<span class="k">class</span> <span class="nc">PngDataReader</span><span class="p">(</span><span class="n">DataReader</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A DataReader designated to read .tif files. </span>
<span class="sd">    </span>
<span class="sd">    Uses the imageio package to do the heavy lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reads a PNG image to self.data and returns it as well.</span>
<span class="sd">        Also populates self.metadat with the image&#39;s metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">imageio</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">meta</span>  <span class="c1"># imageio reads metadata for us</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
    
    <span class="k">def</span> <span class="nf">summarize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;A simple mean of the data.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">imageio</span></code> does input verification for me (kinda) we don’t need our own method to do it for us. Besides that, the read method also creates a <code class="docutils literal notranslate"><span class="pre">self.metadata</span></code> attribute, since <code class="docutils literal notranslate"><span class="pre">imageio</span></code> allows it. Again, this wasn’t required by the parent.</p>
</div>
<div class="section" id="inheritance-why-and-when">
<h3>Inheritance - Why and When<a class="headerlink" href="#inheritance-why-and-when" title="Permalink to this headline">¶</a></h3>
<p>Inheritance can facilitate code re-use and simpler, clearer mental models of the problem at hand. In the example above, we generated very clear and concise classes that do one thing, and do it well. People reading this code - including us in three months - will understand everything about it without any hassle.</p>
<p>A possible issue with inheritance is readability - finding the methods that are associated with the base class can be cumbersome when we start working with tens of attributes and multiple methods. This is why usually people try to avoid more than a single layer of inheritance.</p>
</div>
</div>
<div class="section" id="exercise">
<h2>Exercise<a class="headerlink" href="#exercise" title="Permalink to this headline">¶</a></h2>
<div class="section" id="smartphones">
<h3>Smartphones<a class="headerlink" href="#smartphones" title="Permalink to this headline">¶</a></h3>
<p>Model both a smartphone and a label-specific phone - an iPhone in our case - by using a parent and child class. Have at least one method and one attribute for the base class, and at least one unique method for the child class.</p>
<p>One of the methods has to be a <code class="docutils literal notranslate"><span class="pre">call(phone)</span></code> method, designed to call from one phone to the other. When <code class="docutils literal notranslate"><span class="pre">call()</span></code>ing between iPhones, the method should use the FaceTime interface of the two iPhones. Make sure to keep a log of the calls on both phones.</p>
</div>
<div class="section" id="exercise-solution-below">
<h3>Exercise solution below…<a class="headerlink" href="#exercise-solution-below" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>


<span class="k">class</span> <span class="nc">Phone</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Base class for all types of mobile phones &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">screen_size</span><span class="p">,</span> <span class="n">num_camera</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen_size</span> <span class="o">=</span> <span class="n">screen_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_of_camera</span> <span class="o">=</span> <span class="n">num_camera</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_on</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># power switch</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">photos</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list of pictures taken</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calls</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># call log</span>
    
    <span class="k">def</span> <span class="nf">switch_power</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="c1">#         self.is_on = False if self.is_on else True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_on</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_on</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_on</span> <span class="o">=</span> <span class="kc">True</span>
    
    <span class="k">def</span> <span class="nf">take_photo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Take a photo and append it to the photo album &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">photos</span><span class="o">.</span><span class="n">append</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
    
    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Call another Phone instance &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_on</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">is_on</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">[</span><span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">other</span><span class="o">.</span><span class="n">calls</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Phone </span><span class="si">{</span><span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> is off.&quot;</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">other</span>

<span class="k">class</span> <span class="nc">IPhone</span><span class="p">(</span><span class="n">Phone</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A more expensive phone, that can call other iPhones using a special call method &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">screen_size</span><span class="p">,</span> <span class="n">num_camera</span><span class="p">,</span> <span class="n">apple_id</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">screen_size</span><span class="p">,</span> <span class="n">num_camera</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apple_id</span> <span class="o">=</span> <span class="n">apple_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">facetime_calls</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># FaceTime call log</span>
    
    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Overrides the call method from the parent class &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_on</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">is_on</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">facetime_calls</span><span class="p">[</span><span class="n">other</span><span class="o">.</span><span class="n">apple_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">[</span><span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                <span class="n">other</span><span class="o">.</span><span class="n">calls</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">other</span><span class="o">.</span><span class="n">facetime_calls</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">apple_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Phone </span><span class="si">{</span><span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> is off.&quot;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">other</span>
        
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">regular</span> <span class="o">=</span> <span class="n">Phone</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;lg_v10&#39;</span><span class="p">,</span> <span class="n">screen_size</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">iphone</span> <span class="o">=</span> <span class="n">IPhone</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;iphone_8&#39;</span><span class="p">,</span> <span class="n">screen_size</span><span class="o">=</span><span class="mf">5.5</span><span class="p">,</span> <span class="n">num_camera</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">apple_id</span><span class="o">=</span><span class="s1">&#39;first_iphone_8&#39;</span><span class="p">)</span>
<span class="n">iphone2</span> <span class="o">=</span> <span class="n">IPhone</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;iphone_X&#39;</span><span class="p">,</span> <span class="n">screen_size</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">num_camera</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">apple_id</span><span class="o">=</span><span class="s1">&#39;second_iphone_X&#39;</span><span class="p">)</span>

<span class="c1"># Call from regular phone to iPhone</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Before calling, the log for regular shows: </span><span class="si">{</span><span class="n">regular</span><span class="o">.</span><span class="n">calls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">iphone</span> <span class="o">=</span> <span class="n">regular</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">iphone</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;After the call, regular shows </span><span class="si">{</span><span class="n">regular</span><span class="o">.</span><span class="n">calls</span><span class="si">}</span><span class="s2"> and the iPhone shows </span><span class="si">{</span><span class="n">iphone</span><span class="o">.</span><span class="n">calls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Before calling, the log for regular shows: {}
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>After the call, regular shows {&#39;iphone_8&#39;: 1615197162.3641653} and the iPhone shows {&#39;lg_v10&#39;: 1615197162.3641658}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Two iPhones:</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Before calling, the log for first iPhone shows: </span><span class="si">{</span><span class="n">iphone</span><span class="o">.</span><span class="n">facetime_calls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">iphone2</span> <span class="o">=</span> <span class="n">iphone</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">iphone2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;After the call, the first iPhone shows </span><span class="si">{</span><span class="n">iphone</span><span class="o">.</span><span class="n">facetime_calls</span><span class="si">}</span><span class="s2"> and the second shows </span><span class="si">{</span><span class="n">iphone2</span><span class="o">.</span><span class="n">facetime_calls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Before calling, the log for first iPhone shows: {}
After the call, the first iPhone shows {&#39;second_iphone_X&#39;: 1615197162.3692613} and the second shows {&#39;first_iphone_8&#39;: 1615197162.369262}
</pre></div>
</div>
</div>
</div>
<p>Object-oriented design requires you to think about the code you’re about to write - how to model each object, how to deal with the interfaces between them, how to verify the types of each input, etc.</p>
<p>Because we’re trying to model a complex structures, we usually don’t succeed in the first try. That’s because we become smarter and understand our needs from the model better <strong>only after we’ve used it.</strong> Premeditating and debating on the exact way through which two <code class="docutils literal notranslate"><span class="pre">Phones()</span></code> will call each other is important, but we’ll usually just <strong>refactor</strong> our initial model in favor of a better one after a few days of “usage”. That’s the underlying reason for “alpha” and “beta” versions of software.</p>
<p>In short, rewriting large parts of an application you designed is expected, since it’s a natural and important part of software design - a luxury other engineers rarely have.</p>
</div>
</div>
<div class="section" id="errors-and-exceptions">
<h2>Errors and Exceptions<a class="headerlink" href="#errors-and-exceptions" title="Permalink to this headline">¶</a></h2>
<p>A very debated feature of Python (and other scripting languages) is its fear of failing. Python tries to coerce unknown commands into something familiar that it can work with. For example, addition of <code class="docutils literal notranslate"><span class="pre">bool</span></code>s and other types is fully supported, since <code class="docutils literal notranslate"><span class="pre">bool</span></code> types are treated as 0 (for <code class="docutils literal notranslate"><span class="pre">False</span></code>) and 1 (for <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kc">True</span> <span class="o">-</span> <span class="mf">1.0</span>  <span class="c1"># True is also 1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kc">False</span> <span class="o">+</span> <span class="mi">10</span>  <span class="c1"># False is also 0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10
</pre></div>
</div>
</div>
</div>
<p>However, many other statements will result in an error, or <em>Exception</em> in Python’s terms:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;3&#39;</span> <span class="o">+</span> <span class="mi">3</span>  <span class="c1"># TypeError</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">977675</span><span class="n">d93a78</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="s1">&#39;3&#39;</span> <span class="o">+</span> <span class="mi">3</span>  <span class="c1"># TypeError</span>

<span class="ne">TypeError</span>: can only concatenate str (not &quot;int&quot;) to str
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># IndexError</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">IndexError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">13</span><span class="o">-</span><span class="mi">4076</span><span class="n">b5525985</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># IndexError</span>

<span class="ne">IndexError</span>: list index out of range
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">camel</span>  <span class="c1"># NameError</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">30</span><span class="n">dc50b6b31d</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">camel</span>  <span class="c1"># NameError</span>

<span class="ne">NameError</span>: name &#39;camel&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>There are many built-in exceptions in Python, and most modules you’ll use created their designated exceptions. Modules and packages do this because the exception is <em>meaningful</em> - each exception conveys information about what went wrong during the runtime. Since it’s not a simple error, we can use this information by predetermining the course of action when an excpetion occurs. This is called <em>catching</em> an exception.</p>
<p>The keywords involved are: <code class="docutils literal notranslate"><span class="pre">try</span></code>, <code class="docutils literal notranslate"><span class="pre">except</span></code>, <code class="docutils literal notranslate"><span class="pre">else</span></code> and <code class="docutils literal notranslate"><span class="pre">finally</span></code>. An example might consist of interacting with the file system:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="c1"># Do something that might fail</span>
    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
    <span class="c1"># If we don&#39;t have permission to do the operation (e.g. write to protected disk), do the following</span>
    <span class="c1"># ...</span>
<span class="k">except</span> <span class="ne">IsADirectoryError</span><span class="p">:</span>
    <span class="c1"># Trying to do a file operation on a directory - so do the following</span>
    <span class="c1"># ...</span>
<span class="k">except</span> <span class="p">(</span><span class="ne">NameError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
    <span class="c1"># If we encouter either a non-existent variable or operation on variables, do the following</span>
    <span class="c1"># ...</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="c1"># General error, not caught by previous exceptions</span>
    <span class="c1"># ...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># If the operation under &quot;try&quot; succeeded, do the following</span>
    <span class="c1"># ...</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="c1"># Regardless of the result - success or failure - do this.</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<p>Let’s break it down:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Simplest form of exception handling:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>  <span class="c1"># a or b isn&#39;t defined</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>

<span class="c1"># We could catch other exceptions</span>
<span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;3&#39;</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>  <span class="c1"># a isn&#39;t a float\int</span>
    <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># With the else clause</span>
<span class="n">current_key</span> <span class="o">=</span> <span class="s1">&#39;Mike&#39;</span>
<span class="n">default_val</span> <span class="o">=</span> <span class="s1">&#39;Cohen&#39;</span>
<span class="n">dict_1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;John&#39;</span><span class="p">:</span> <span class="s1">&#39;Doe&#39;</span><span class="p">,</span> <span class="s1">&#39;Jane&#39;</span><span class="p">:</span> <span class="s1">&#39;Doe&#39;</span><span class="p">}</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">johns</span> <span class="o">=</span> <span class="n">dict_1</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">current_key</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># Non-existent key</span>
    <span class="n">dict_1</span><span class="p">[</span><span class="n">current_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_val</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">dict_1</span><span class="p">)</span><span class="si">}</span><span class="s2"> remaining key(s) in the dictionary&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">dict_1</span><span class="p">)</span><span class="si">}</span><span class="s2"> remaining key(s) in the dictionary&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dict_1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3 remaining key(s) in the dictionary
{&#39;John&#39;: &#39;Doe&#39;, &#39;Jane&#39;: &#39;Doe&#39;, &#39;Mike&#39;: &#39;Cohen&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Another else example</span>
<span class="n">tup</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;IndexError&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exception: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">; tup: </span><span class="si">{</span><span class="n">tup</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">raise</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># process_data(a, b)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>IndexError
Exception: tuple index out of range; tup: (1,)
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">IndexError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">17</span><span class="o">-</span><span class="mi">79278</span><span class="n">fbd754c</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">tup</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">----&gt; </span><span class="mi">4</span>     <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;IndexError&quot;</span><span class="p">)</span>

<span class="ne">IndexError</span>: tuple index out of range
</pre></div>
</div>
</div>
</div>
<p>We use the <code class="docutils literal notranslate"><span class="pre">else</span></code> clause because we wish to catch a specific <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> during the tuple unpacking (<code class="docutils literal notranslate"><span class="pre">a,</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">tup[0],</span> <span class="pre">tup[1]</span></code>). The <code class="docutils literal notranslate"><span class="pre">process_data(a,</span> <span class="pre">b)</span></code> can raise other <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>s which we’ll deal with inside the function. But the relevant <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> to catch is the tuple destructuring one.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># With the finally clause</span>
<span class="k">def</span> <span class="nf">divisor</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Divides two numbers.</span>
<span class="sd">    a, b - numbers (int, float)</span>
<span class="sd">    returns a tuple of the result and a possible error.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
    <span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">err</span> <span class="o">=</span> <span class="n">e</span>
    <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">err</span> <span class="o">=</span> <span class="n">e</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">err</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ans</span><span class="p">,</span> <span class="n">err</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Should work:</span>
<span class="n">ans</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">divisor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="s2">&quot; ----&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>

<span class="c1"># ZeroDivisionError:</span>
<span class="n">ans</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">divisor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="s2">&quot;----&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>

<span class="c1"># TypeError</span>
<span class="n">ans</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">divisor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span> <span class="s2">&quot;----&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.5  ---- None
None ---- division by zero
None ---- unsupported operand type(s) for /: &#39;int&#39; and &#39;str&#39;
</pre></div>
</div>
</div>
</div>
<p>Exception handling is used almost everywhere in the Python world. We always expect our operations to fail, and catch the errors as our backup plan. This is considered more Pythonic than other options. Here’s a “real-world” example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Integer conversion. We check before doing it to make sure it won&#39;t raise errors</span>
<span class="k">def</span> <span class="nf">int_conversion</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Convert a string to int &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">s</span><span class="o">.</span><span class="n">isdigit</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>    <span class="c1">#too many digits for int conversion</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Same purpose - more Pythonic</span>
<span class="k">def</span> <span class="nf">pythonic_int_conversion</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Convert a string to int &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">OverflowError</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>
<span class="c1"># This is also sometimes phrased as &quot;easier to ask for forgiveness than permission&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-user-input-verification">
<h2>Exercise - User Input Verification<a class="headerlink" href="#exercise-user-input-verification" title="Permalink to this headline">¶</a></h2>
<p>The user’s input is always a very error-prone area in an application. A famous joke describes this situation in the following manner:</p>
<blockquote>
<div><p>A Quality Assurance (QA) Engineer walks into a bar. Orders a beer. Orders 0 beers. Orders 999999999 beers. Orders a lizard. Orders -1 beers. Orders a sfdeljknesv.</p>
</div></blockquote>
<p>A decent application should not only handle all possible incoming inputs, but should also convey back to the user the information of what went wrong. In this exercise you’ll write a <code class="docutils literal notranslate"><span class="pre">verify_input</span></code> function that handles file and folder names.</p>
<div class="section" id="short-intro-pathlib">
<h3>Short Intro - <code class="docutils literal notranslate"><span class="pre">pathlib</span></code><a class="headerlink" href="#short-intro-pathlib" title="Permalink to this headline">¶</a></h3>
<p>For file I/O and other disk operations, some of which are required in this exercise, Pythonistas use <code class="docutils literal notranslate"><span class="pre">pathlib</span></code>, a module in the Python standard library designated to work with files and folders (<code class="docutils literal notranslate"><span class="pre">pathlib2</span></code> in Python 2). Its basic premise is that files and folders are objects themselves, and certain operations are allowed between these objects.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p_win</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;C:/Users/Hagai/Documents\Classes\python-course-for-students&#39;</span><span class="p">)</span>  <span class="c1"># notice the &quot;raw&quot; string r&#39;&#39;,</span>
<span class="c1"># it forces Python to not duplicate backslashes</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;/home/hagai/Teaching/python_students&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PosixPath(&#39;/home/hagai/Teaching/python_students&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">parent</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PosixPath(&#39;/home/hagai/Teaching&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">parents</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[PosixPath(&#39;/home/hagai/Teaching&#39;),
 PosixPath(&#39;/home/hagai&#39;),
 PosixPath(&#39;/home&#39;),
 PosixPath(&#39;/&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>  <span class="c1"># is it actually a folder\file?</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">parts</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;/&#39;, &#39;home&#39;, &#39;hagai&#39;, &#39;Teaching&#39;, &#39;python_students&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;python_students&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">p1</span><span class="o">.</span><span class="n">iterdir</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">30</span><span class="o">-</span><span class="mi">62</span><span class="n">f9f5df060a</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">p1</span><span class="o">.</span><span class="n">iterdir</span><span class="p">():</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="nb">print</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="nn">/opt/hostedtoolcache/Python/3.8.8/x64/lib/python3.8/pathlib.py</span> in <span class="ni">iterdir</span><span class="nt">(self)</span>
<span class="g g-Whitespace">   </span><span class="mi">1119</span>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1120</span>             <span class="bp">self</span><span class="o">.</span><span class="n">_raise_closed</span><span class="p">()</span>
<span class="ne">-&gt; </span><span class="mi">1121</span>         <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessor</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1122</span>             <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;..&#39;</span><span class="p">}:</span>
<span class="g g-Whitespace">   </span><span class="mi">1123</span>                 <span class="c1"># Yielding a path object for these makes little sense</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;/home/hagai/Teaching/python_students&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traversing the file system</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;C:/Users/Hagai/Documents&#39;</span><span class="p">)</span>
<span class="n">p2</span> <span class="o">/</span> <span class="s1">&#39;Classes&#39;</span> <span class="o">/</span> <span class="s1">&#39;python-course-for-students&#39;</span>
<span class="c1"># Operator overloading</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PosixPath(&#39;C:/Users/Hagai/Documents/Classes/python-course-for-students&#39;)
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-exercise">
<h4>The exercise:<a class="headerlink" href="#the-exercise" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">UserInputVerifier</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assert that the input from a user is a valid folder name. A valid folder is a folder</span>
<span class="sd">    containing the following files: &quot;a.py&quot;, &quot;b.py&quot;, &quot;c.py&quot;, and the data file &quot;data.txt&quot;. However, the class</span>
<span class="sd">    should be able to deal with any arbitrary filename, or an iterable of which.</span>
<span class="sd">    If the given folder doesn&#39;t contain it, it&#39;s possible the user gave us a parent folder of the </span>
<span class="sd">    folder that contains these Python files. Look into any sub-folders for these files, and return the</span>
<span class="sd">    &quot;actual&quot; true folder, i.e. the top-most folder containing all the files.</span>
<span class="sd">    Input - Foldername, string</span>
<span class="sd">    Output - A pathlib object. If the input isn&#39;t valid, i.e. the files weren&#39;t found, </span>
<span class="sd">    the class should raise an exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="id1">
<h3>Exercise solution below…<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">UserInputVerifier</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assert that the given foldername contains files in &quot;filenames&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">foldername</span><span class="p">,</span> <span class="n">filenames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a.py&#39;</span><span class="p">,</span> <span class="s1">&#39;b.py&#39;</span><span class="p">,</span> <span class="s1">&#39;c.py&#39;</span><span class="p">,</span> <span class="s1">&#39;data.txt&#39;</span><span class="p">]):</span>    
        <span class="bp">self</span><span class="o">.</span><span class="n">raw_folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">foldername</span><span class="p">))</span>  <span class="c1"># first possible error</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filenames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verify_filenames</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">_verify_filenames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filenames</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Verify the input filenames, and return it as an iterable. &quot;&quot;&quot;</span>
        
        <span class="n">typ</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">typ</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">set</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Filenames should be an iterable, a Path object or a string.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">typ</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">filenames</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">filenames</span>
        
    <span class="k">def</span> <span class="nf">check_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Assert that the files are indeed in the folder or in one of its subfolders &quot;&quot;&quot;</span>
        
        <span class="n">existing_files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">missing_files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_folder</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">UserWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Folder </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_folder</span><span class="si">}</span><span class="s2"> doesn&#39;t exist.&quot;</span><span class="p">)</span>
            
        <span class="c1"># Make sure that each file we&#39;re looking for doesn&#39;t </span>
        <span class="k">for</span> <span class="n">file_to_look</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filenames</span><span class="p">:</span>
            <span class="n">found_files</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_folder</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="n">file_to_look</span><span class="p">)]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">UserWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">file_to_look</span><span class="si">}</span><span class="s2">&#39; was missing from folder &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_folder</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_files</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">UserWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;More than one file named &#39;</span><span class="si">{</span><span class="n">file_to_look</span><span class="si">}</span><span class="s2">&#39; was found in &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_folder</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">foldername</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;./mock&#39;</span>
<span class="n">verifier</span> <span class="o">=</span> <span class="n">UserInputVerifier</span><span class="p">(</span><span class="n">foldername</span><span class="p">)</span>
<span class="n">verifier</span><span class="o">.</span><span class="n">check_folder</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">UserWarning</span><span class="g g-Whitespace">                               </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">34</span><span class="o">-</span><span class="mi">57</span><span class="n">c6abe60b2f</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">foldername</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;./mock&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">verifier</span> <span class="o">=</span> <span class="n">UserInputVerifier</span><span class="p">(</span><span class="n">foldername</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">verifier</span><span class="o">.</span><span class="n">check_folder</span><span class="p">()</span>

<span class="nn">&lt;ipython-input-33-803863538e46&gt;</span> in <span class="ni">check_folder</span><span class="nt">(self)</span>
<span class="g g-Whitespace">     </span><span class="mi">23</span>         <span class="n">missing_files</span> <span class="o">=</span> <span class="p">[]</span>
<span class="g g-Whitespace">     </span><span class="mi">24</span>         <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_folder</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<span class="ne">---&gt; </span><span class="mi">25</span>             <span class="k">raise</span> <span class="ne">UserWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Folder </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_folder</span><span class="si">}</span><span class="s2"> doesn&#39;t exist.&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">26</span> 
<span class="g g-Whitespace">     </span><span class="mi">27</span>         <span class="c1"># Make sure that each file we&#39;re looking for doesn&#39;t</span>

<span class="ne">UserWarning</span>: Folder mock doesn&#39;t exist.
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./classes/class_3"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="../class_2/class_2.html" title="previous page">Class 2: Virtual Environments and Object-oriented Programming (OOP)</a>
    <a class='right-next' id="next-link" href="../class_4/class_4.html" title="next page">Class 4: The Scientific Stack (Part I - <code class="docutils literal notranslate"><span class="pre">numpy</span></code>)</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Dr. Hagai Hargil, Zvi Baratz, Gal Ben-Zvi<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>